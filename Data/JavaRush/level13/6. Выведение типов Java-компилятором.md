## 1. Синтаксический сахар

Программисты любят, когда какой-то сложный код или логику можно написать парой строк, и код при этом компактный и читаемый. А разработчики языков иногда помогают им в этом.

Хитрые особенности языка, которые позволяют использовать более короткий путь (писать меньше кода), называют синтаксическим сахаром. Хотя, честно говоря, в Java его совсем немного.

Разработчики Java сделали все, чтобы устранить из Java всю возможную избыточность. Если в C++ что-то можно сделать десятью способами, в Java чаще всего это можно сделать только одним способом.

Но такая унификация не нравится ни Java-программистам, ни создателям Java. И иногда они упрощают жизнь обычным ребятам вроде нас с вами.

Вы, кстати, уже познакомились с вещью, которую можно отнести к синтаксическому сахару — это autoboxing и unboxing. Сравните:

![Pasted image 20230917115533.png](..%2F..%2F..%2F..%2FAppData%2FLocal%2FTemp%2FPasted%20image%2020230917115533.png)

## 2. Выведение типа переменной – `var`

В Java 11 компилятор стал еще умнее и теперь может определить **тип создаваемой переменной по типу значения**, которое ей присваивают. Выглядит это в коде так:

```java
var имя = значение;
```

Где `имя` — это имя новой переменной, значение — ее стартовое значение, а `var` — это ключевое слово, используемое для объявления переменной. Тип у переменной имя будет такой же, как у значения, которое ей присваивают.

![Pasted image 20230917115658.png](..%2F..%2F..%2F..%2FAppData%2FLocal%2FTemp%2FPasted%20image%2020230917115658.png)

Компилятор сам определяет или, как еще говорят, **выводит тип переменной** на основе значения, которое ей присваивают.

Немало копий было сломлено в баталиях программистов на тему того, стоит ли добавлять такую возможность в язык или нет. Многие боялись, что использованием `var` начнут злоупотреблять, и читаемость кода сильно снизится.

Доля истины в этом есть, так что лучше всего использовать `var` там, где это повышает читабельность кода. Например, этих в двух случаях:

![Pasted image 20230917115749.png](..%2F..%2F..%2F..%2FAppData%2FLocal%2FTemp%2FPasted%20image%2020230917115749.png)
![Pasted image 20230917120035.png](..%2F..%2F..%2F..%2FAppData%2FLocal%2FTemp%2FPasted%20image%2020230917120035.png)
![Pasted image 20230917120317.png](..%2F..%2F..%2F..%2FAppData%2FLocal%2FTemp%2FPasted%20image%2020230917120317.png)

Когда мы перешли от варианта в строке 1 к варианту в строке 2, мы за счет имени переменной (`headerInfo`) добавили коду немного читаемости. Теперь ясно, что метод возвращал не просто метаинформацию, а информацию о заголовке.

Третий вариант был бы избыточным. Ну и что, что `headerInfo` имеет тип `FileMetaInfo` — это и так было почти понятно по методу `getFileMetaInfo()`. Гораздо интереснее назначение этой метаинформации.

## 3. Опускание типа — оператор diamond: `<>`

Еще до появления оператора `var` были попытки научить компилятор выводить типы коллекций. Согласитесь, эта запись выглядит немного избыточно:

```java
ArrayList<String> list = new ArrayList<String>();
```

Начиная с седьмой версии Java, при записи типа коллекции можно было опускать (не писать) тип элементов коллекции, если он указан при объявлении переменной. Т.е. код выше можно записать немного в сокращенном виде:

```java
ArrayList<String> list = new ArrayList<>();
```

Как вы видите, второй раз писать тип String больше не нужно. Не так круто, как с оператором var, но в свое время и это казалось достижением.

Пустые треугольные скобки в типе коллекции получили название **оператор diamond**: две скобки отдаленно напоминали силуэт бриллианта.

Использовать **одновременно** `var` и оператор diamond не желательно:

```java
var list = new ArrayList<>();
```

## 4. Двойные фигурные скобки

Создателям Java понравилась идея использовать фигурные скобки для упрощенной записи данных в массив. Но как быть с коллекциями?

Для коллекций тоже хватило фантазии: разрешили использовать трюк с двойными фигурными скобками.

![Pasted image 20230917131741.png](..%2F..%2F..%2F..%2FAppData%2FLocal%2FTemp%2FPasted%20image%2020230917131741.png)

Если компилятор встретит код в примере слева, он преобразует его в код справа.

Код не становится сильно компактнее. Тут скорее экономия на мелочах: не нужно каждый раз писать `list`. Это может быть выгодно, если имя переменной очень длинное.

Но если вы встретите в чьем-то проекте такой код, не удивляйтесь