Чтобы написать автотесты для API, описывают пользовательские сценарии — как в ручном тестировании. Это значит, что нужно покрыть требования тестами и спроектировать проверки разных ситуаций.

Можно отталкиваться от готовых тест-кейсов для ручного тестирования. Если их нет, нужно написать тест-кейсы по требованиям в документации. Здесь помогут принципы тест дизайна. Чтобы повторить их, загляни в [шпаргалку](https://code.s3.yandex.net/qa-automation-engineer/java/track2/cheatsheets/sprint7/test_design_cheatsheet.pdf).

Обычно в тест-кейсе есть:

- **ID**;
- **заголовок** — суть проверки;
- **приоритет** — помогает отсортировать тест-кейсы. Сценарии с блокирующим приоритетом автоматизируют в первую очередь;
- **предусловия** — подготовительные шаги и тестовые данные;
- **шаги** — последовательность действий;
- **ожидаемые результаты** — помогают понять, успешно ли выполнены шаги;
- **постусловия** — операции, которые возвращают систему к исходному состоянию.

Не забывай, что автотесты должны быть независимы. Это значит, что их можно запускать по одному и в любом порядке: результат одного теста не зависит от другого.

Тест-кейсы для API-автотестов могут быть позитивными и негативными. Позитивные проверяют, что сервис обрабатывает данные так, как задумано. Негативные — что он правильно реагирует на некорректные запросы.

В сценариях для API-автотестов важно проверить, что:

- Возвращается ожидаемый код ответа. Например, 200 OK, если запрос выполнен; или 401 Unauthorized, если анонимный клиент пытается выполнить запрос, который защищён аутентификацией.
- Структура и типы данных в теле ответа такие же, как в документации.
- Ответ на запрос приходит не слишком долго. Например, продуктивный стенд обычно работает быстрее, чем тестовый. Нужную скорость ответа иногда указывают в документации.
  Например, нужно проверить требование: в Mesto можно поставить лайк фотографии. Получится такой тест-кейс:
![img_1.png](img%2Fimg_1.png)
  Обрати внимание: чтобы написать тесты для API, пользовательских сценариев бывает недостаточно. Иногда нужно смотреть на код приложения.

Представь, что в приложении есть ограничение: неуспешных попыток аутентификации может быть не больше пяти, но это забыли указать в требованиях. Во время тестирования ты можешь превысить количество попыток. Тогда не получится отправлять запросы какое-то время. Код приложения поможет понять, почему тесты перестали работать.