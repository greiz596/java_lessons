В этом разделе ты узнаешь, как автоматизировать проверки API.

Ты уже знаешь, как писать UI-автотесты через Selenium. У автотестов для API много преимуществ.

### Протестировать быстрее

Чем быстрее найдёшь баг, тем дешевле его исправить.

Чтобы добраться до элемента, в UI нужно проделать много кликов и переходов. Например, нужно проверить ввод в поле номера телефона. Для этого придётся залогиниться, ввести имя, фамилию и адрес. Откроется форма с номером телефона, и только там будет нужное поле.

Тесты API не запускают браузеры и не ищут элементы на странице. А ещё не ждут, пока отрисуется графика и загрузятся картинки. Поэтому они быстрее, чем UI.

API тесты позволяют сосредоточиться на бизнес-логике и сэкономить время.

### Протестировать, когда UI нет

Бывает, что невозможно протестировать сервис через UI. Например, интерфейс ещё не готов. Чтобы не ждать, можно проверить бизнес-логику через API.

Другой случай — UI вообще нет. Пользователи «общаются» с приложением только через API. Представь сервис сложных математических расчётов. У него нет интерфейса: только «ручки», которые можно дёргать и получать результат.

### Сохранить стабильность

Часто UI сильно меняется в процессе подготовки: например, приходится переписывать определение локаторов.

Например, когда сделали редизайн экрана: поменялись и кнопки, и картинки, и поля. Чтобы менять локаторы и дорабатывать автотесты, приходится тратить время. Тесты должны быть устойчивы к изменениям.

API меняется гораздо реже, чем UI. Поэтому тесты для API намного стабильнее.
### Добраться до самых укромных мест

Иногда баги скрываются там, куда не добраться через UI. Через API это получится сделать.

Например, ручка выдаёт данные о зарплате сотрудников. В UI ты не сможешь поменять ID сотрудника на чужой: поле закрыто для редактирования. Но через API получится ввести любой ID — хоть гендиректора, хоть тестировщика. Это баг.

Бывают и злонамеренные попытки использовать API в обход UI. Например, когда API публичное, или кто-то получил к нему доступ.

Именно тестирование API позволит найти самые критичные баги и защититься от них.
### Протестировать отдельные части

Протестировать UI можно, когда приложение уже готово: чтобы проверить его в том виде, в каком увидят реальные пользователи.

API-тестирование позволяет тестировать отдельные части приложения независимо друг от друга. Можно не ждать, пока приложение разработают полностью.

Ещё это помогает сфокусироваться на самых критичных местах, чтобы протестировать их максимально подробно. Например, приложение — интернет-магазин. Самый критичный флоу — создание заказа и оплата. Показ инструкций к товару можно тестировать менее подробно.

Автотесты API:

- быстрее и стабильнее,
- позволяют протестировать укромные места,
- позволяют протестировать отдельные части приложения независимо друг от друга.