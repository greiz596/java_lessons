В этом разделе ты узнаешь, почему важно делать тесты изолированными.

**Изолированный тест** не зависит от других тестов или окружения. Он работает сам по себе.

Например, есть два теста. Первый проверяет, что в базу данных добавилось значение. Второй — что это значение выводится на экран.

Второй тест не изолирован, потому что зависит от первого. Если первый тест упадёт, значение не появится в базе данных. Второй не сможет работать.

Ещё пример. Есть два теста:

- первый присваивает значение строке — например, first test;
- второй добавляет к этой строке символы — например, second test.

Скопировать кодJAVA

```
import org.junit.Assert;
import org.junit.Test;

public class Praktikum {

    private static String string;

    @Test
    public void firstTest() { // присваивает значение
        string = "first test";
        Assert.assertEquals("first test", string);
    }

    @Test
    public void secondTest() { // добавляет строку
        string = string + ", second test";
        Assert.assertEquals("first test, second test", string);
    }
} 
```

Если запустить второй тест без первого, он завершится с ошибкой: ему не к чему будет прибавлять символы. Переменная `string` будет равна `null`, `second test`. Но в наборе из двух тестов отработает без проблем.

Второй тест не изолирован.

**Изолированные тесты можно запускать как угодно:**

- по одному;
- в наборе тестов;
- в порядке по умолчанию — том, который задан во фреймворке. Например, тесты запускаются по алфавиту;
- в случайном порядке.

Они дадут одинаковый результат в любом случае.

Если тест не изолирован, это значит:

- Тест падает, если запустить только его, но вместе с другими тестами проходит. Как в примере со строками.
- Запускать тесты можно только в определённом порядке. Например, первый тест вводит данные в поле ввода, а второй с ним работает. Если сначала запустить второй тест, он не найдёт данные и упадёт.

### Изоляция и атомарность

Вспомни правило атомарности. Хороший тест нельзя декомпозировать на несколько маленьких тестов.

Например, ты тестируешь интернет-магазин. Он состоит из нескольких экранов: стартовая страница, страница выбора товаров, личный кабинет.

Нужно проверить, что товар добавляется в корзину. Для этого не стоит проходить весь путь от стартовой страницы: можно сразу перейти к странице выбора товара. Тестировщик отсекает всё ненужное и проверяет только конкретную функциональность.

Изоляция тесно связана с атомарностью. Атомарный тест должен быть изолирован.

Вернись к примеру с базой данных. Первый тест проверяет, что в базу данных добавилось значение. Второй — что это значение выводится на экран. Кажется, что можно объединить их в один тест: сначала добавить данные, а потом вывести на экран. Но тогда этот тест не будет атомарным: его можно разбить на более мелкие компоненты.

Чтобы сделать тесты и атомарными, и изолированными, во второй тест можно передать постоянные значения. То есть не брать их из базы, а зашить значения в сам тест.

Нужно создавать тесты, которые ни от чего не зависят и не полагаются на другие тесты. Иначе логика может оказаться нерабочей.

В следующем уроке — про то, как разорвать зависимость в тестах.