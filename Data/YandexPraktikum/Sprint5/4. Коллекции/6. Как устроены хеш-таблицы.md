# Как устроены хеш-таблицы

В этом уроке ты узнаешь, как работают хеш-таблицы.

У каждого объекта в Java есть числовое представление — **хеш-код**. Это уникальный номер типа `int`: например, 2908.

Когда ты передаёшь в хеш-таблицу ключ и значение, **хеш-функция** узнаёт хеш-код ключа и распределяет ключи по ячейкам. Добавлять эту функцию не нужно: она есть в классе `HashMap`.

Например, ты передаёшь в хеш-таблицу ключ `"Пушок"`. Хеш-функция определяет его хеш-код и помещает в ячейку 4. По такому же принципу она распределит и другие ключи.

![img_7.png](img%2Fimg_7.png)

Ячейки хеш-таблицы хранятся в массиве, поэтому их индексы начинаются с 0. По умолчанию в хеш-таблице 16 ячеек.

### Метод `hashCode()`

Чтобы определить номер ячейки, хеш-функция использует метод `hashCode()`. Он есть у каждого объекта в Java и определяет его хеш-код.

Метод `hashCode()` обычно переопределяют, чтобы он учитывал поля конкретного класса. Например:

```java
import java.util.Objects;

public class Cat {

    private String name;
    private int age;

    @Override
    public int hashCode() {
        return Objects.hash(name, age); // вспомогательный метод помогает получить хеш-код по входным значениям
    }

    public static void main(String[] args) {
      Cat cat = new Cat();
      System.out.println(cat.hashCode()); // выведется хеш-код объекта cat
    }
}
```

Метод `hashCode()` может возвращать большие числа из диапазона `int`: например, 753 986 345. В хеш-таблице обычно меньше ячеек, поэтому хеш-функция преобразует хеш-код в меньшее число.

### Коллизии

В каждой ячейке можно хранить список из нескольких элементов, поэтому хеш-функция может направить разные ключи в одну ячейку. Это называется **коллизия**.

![img_8.png](img%2Fimg_8.png)

Обычно коллизии не мешают работе хеш-таблицы: все данные сохраняются.

Чтобы найти значение по ключу, хеш-таблица итерируется по ячейке и проверяет каждый ключ. Если происходит много коллизий, приходится часто выполнять итерацию — это может замедлить работу хеш-таблицы.

Хеш-таблица периодически вычисляет отношение занятых ячеек к свободным. Если оно больше коэффициента заполнения (англ. load factor), добавляются новые ячейки. Коэффициент заполнения по умолчанию — 75%.

Когда создаются новые ячейки, хеш-функция заново определяет хеш-коды ключей и перераспределяет их по ячейкам.

### Задание 
#### 1
![img_9.png](img%2Fimg_9.png)

#### 2
![img_10.png](img%2Fimg_10.png)