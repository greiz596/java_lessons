Ты уже умеешь делать коммиты и знаешь, что такое хеш. В этом уроке ты научишься работать с историей коммитов.

В командных проектах не всегда понятно, что, зачем и когда меняется в коде. Не про все задачи и обновления коллеги пишут. Часто на помощь приходит история сохранённых версий. Представь, что ты скачиваешь рабочий проект и пытаешься его запустить. И тут вдруг появляется ошибка! На прошлой неделе её не было и код запускался. Значит, она связана с последними коммитами.

С помощью истории коммитов можно посмотреть последние изменения в проекте и почитать комментарии к ним. А ещё — откатить проект до предыдущей версии. Это поможет, если в один из недавних коммитов попала ошибка, а тебе нужно продолжить работу.


### Как вызвать историю коммитов

Часто нужно посмотреть историю сохранённых версий.

Для этого используют команду `git log` (англ. log, «регистрация»). Она выводит все коммиты и сообщает данные каждого из них:



```
# команда для просмотра истории коммитов
$ git log

commit c952d9626e27a4d6249faf368c7d22655476365c (HEAD -> main)
Author: Stas Basov <stasbasov@yandex.ru>
Date:   Fri Oct 11 16:00:04 2019 +0300

    added readme.txt

commit a22f3328b28ab901c12a4e7a5ce8fc543a6ed991
Author: Stas Basov <stasbasov@yandex.ru>
Date:   Fri Oct 11 15:58:36 2019 +0300

    added new file

# первая строка: присвоенный коммиту хеш 
# вторая строка: имя и почта автора коммита. Необязательно это автор файла. Коммитер
# — тот, кто отдал команду git commit. 
# третья строка: дата коммита
# и последняя строка: сообщение коммита 
```

По умолчанию коммиты перечисляются в обратном порядке — от последнего к самому первому.

Чтобы выйти из просмотра, нажми клавишу **`q`**.

### Уточнение изменений: `git show`

Случается, что в какую-то из версий финального файла добавили что-то не то. В Git можно посмотреть историю действий и вычислить этот коммит.

Перед тобой сразу раскинется панорама: какой файл был изменён, когда и в какой строчке. Тебе останется только просмотреть подробную информацию о коммитах и найти тот, где что-то пошло не так.

Чтобы просмотреть изменения в коммитах, понадобится команда `git show` (англ. show, «показать»). Последний коммит просматривается с указателем `HEAD`:



```
# эта команда выведет на экран последний коммит
$ git show HEAD

# результат:
diff --git a/readme.txt b/readme.txt
new file mode 100644
index 0000000..49861b8
--- /dev/null
+++ b/readme.txt
# в каком файле произвели изменения
@@ -0,0 +1 @@
# номер измененной строки
+Я изучаю Git. Он нужен, чтобы сохранять свой прогресс во время разработки
\ No newline at end of file
# добавленная строка 
```

Изменения в любом из коммитов выводятся по **контрольной сумме** его хеша. Это первые семь символов после надписи `commit`:



```
# для просмотра всех коммитов
$ git log

commit c952d9626e27a4d6249faf368c7d22655476365c (HEAD -> main)
# чтобы посмотреть, какие именно были изменения в коммите, скопируй первые 
# семь символов после слова commit  
```



```
# эта команда служит для просмотра изменений в коммите
$ git show c952d96 
```

Чтобы выйти из просмотра, нужно нажать клавишу `Q`.

### Отказ от изменений: `git reset`

Ты уже знаешь, как найти в хеш истории коммитов. Это пригодится, если ты захочешь откатить проект до определённой версии. Для этого есть команда `git reset` (англ. reset, «сброс в исходное состояние»).

Чтобы вернуться к конкретному коммиту, к команде добавляют **контрольную сумму.** Это семь первых символов хеша нужного коммита.



```
$ git log 
# посмотрели список коммитов

commit 97a25f73849d758dca110bf4a70a29d6f42373ae (master)
Author: Stas Basov <stasbasov@yandex.ru>
Date:   Thu Oct 25 17:02:36 2018 +0300
    First commit: change Main.java
# первый коммит с контрольной суммой 7639878


    commit 76398788bf9c9aba93e4903ead47f1ee6d99976c (HEAD -> feature)
Author: Stas Basov <stasbasov@yandex.ru>
Date:   Thu Oct 25 17:13:01 2018 +0300
    Del all file
# второй коммит

$ git reset 7639878
# откатились до первого коммита, ввели его контрольную сумму 
```

Можно откатиться на один коммит назад в определённом файле. Для этого нужно указать его имя через `HEAD~`:



```
$ git reset HEAD~ Main.java
# откатили изменения до предыдушего коммита в файле Main.java 
```

Указатель `HEAD` означает текущий коммит.

Если не написать имя, сбрасываются все изменения последнего коммита:



```
$ git reset HEAD~
# откатили изменения во всех файлах до предыдущего коммита 
```

Ещё есть команда `git reset --hard` — она сбрасывает все изменения. Вот [инструкция Git](https://git-scm.com/book/ru/v2/%D0%98%D0%BD%D1%81%D1%82%D1%80%D1%83%D0%BC%D0%B5%D0%BD%D1%82%D1%8B-Git-%D0%A0%D0%B0%D1%81%D0%BA%D1%80%D1%8B%D1%82%D0%B8%D0%B5-%D1%82%D0%B0%D0%B9%D0%BD-reset) о том, как это работает.