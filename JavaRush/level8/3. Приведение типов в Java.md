### 1. Приведение типов 

Переменные примитивных типов (за исключением типа `boolean`) используются для хранения разных типов чисел. И хоть типы переменных всегда неизменны, есть место, где можно проводить преобразование типов. И место это — присваивание.

Можно присваивать друг другу переменные разных типов. При этом значение, взятое из переменной одного типа, будет преобразовано в значение другого типа и присвоено второй переменной. В связи с этим можно выделить два вида преобразования типов: расширение и сужение.

**Расширение типа** похоже на перекладывание из маленькой корзинки в большую — операция проходит незаметно и безболезненно. **Сужение типа** — это перекладывание из большой корзинки в маленькую: места может не хватить, и что-то придётся выбросить.


![Pasted image 20230404110407.png](..%2F..%2F..%2F..%2FAppData%2FLocal%2FTemp%2FPasted%20image%2020230404110407.png)

### 2. Расширение типов 

Часто может возникнуть необходимость присвоить переменной одного числового типа значение переменной другого числового типа. Как же это сделать?

В Java есть 4 целочисленных типа:

![Pasted image 20230404110516.png](..%2F..%2F..%2F..%2FAppData%2FLocal%2FTemp%2FPasted%20image%2020230404110516.png)

Переменной большего размера всегда можно присваивать переменные меньшего размера.
Переменной типа `long` спокойно можно присваивать переменные типа `int`, `short` и `byte`. Переменной типа `int` можно присваивать переменные типа `short` и `byte`. Ну и переменной типа `short` можно присваивать переменные типа `byte`.

```Java
byte a = 5;
short b = a;
int c = a + b;
long d = c * c;
```

Такое преобразование, от типа меньшего размера к большему, называется расширением типа.

**А что насчет вещественных чисел?**

Переменной типа `double` можно без проблем присвоить переменную типа `float`. А вот с целочисленными типами интереснее.

Переменной типа `float` можно присвоить переменную любого целочисленного типа. Даже типа `long`, длина которого 8 байт. А переменной типа `double` можно присвоить вообще что угодно: переменную любого целочисленного типа и переменную типа `float`:

```Java
long a = 1234567890; 
float b = a; 
double c = a;
```

Обратите внимание, что преобразование к вещественному типу может привести к потере точности из-за нехватки значащих цифр.

### 3. Сужение типов 

А что насчет остальных вариантов? Что делать, если нужно переменной типа `int` присвоить значение переменной типа `long`?

Представьте, что переменная — это корзина. У нас есть корзины разных размеров: 1, 2, 4 и 8 байт. При перекладывании пирожков из меньшей корзины в большую проблем не будет. А вот при перекладывании из большей в меньшую часть пирожков может потеряться.

Это преобразование — от типа большего размера к меньшему — называют сужением типа. При таком присваивании часть числа может просто не поместиться в новую переменную и «остаться за бортом».

При сужении типа мы должны явно показать компилятору, что мы не ошиблись, и отбрасывание части числа сделано осознанно. Для этого используется оператор приведения типа. Это **имя типа в круглых скобочках**.

В таких ситуациях Java-компилятор требует от программиста указывать оператор преобразования типа. Выглядит в общем виде он так:

```java
(тип) выражение
```

```Java
long a = 1000000;  
int b = (int) a;  
short c = (short) b;  
byte d = (byte) c;

a == 1000000  
b == 1000000  
c == 16960  
d == 64
```

Тип `char`, как и тип `short`, занимает два байта, но для их преобразования в друг друга всегда нужно использовать оператор приведения типа. Все дело в том, что тип `short` знаковый, и может содержать значения от `-32,768` до `+32,767`, а тип `char` беззнаковый, и может содержать значения от `0` до `65,535`.

В `char` нельзя сохранить отрицательные числа, которые могут храниться в `short`. А в `short` нельзя сохранить числа больше `32,767`, которые могут храниться в `char`.

### 4. Тип выражения 

А что делать, если в одном выражении используются переменные разных типов? Логичный ответ – их сначала нужно преобразовать к общему типу. Но какому?

**Конечно же, к большему.**

Если в выражении участвуют типы `int` и `long`, значение типа `int` будет преобразовано к типу `long` и только затем будет участвовать в операции:

```Java
int a = 1;  
long b = 2;  
long c = a + b;
```
`a` будет расширена до типа `long` и только затем произойдет сложение.

#### Числа с плавающей точкой

Если в выражении участвуют целое число и число с плавающей точкой (`float`/`double`), целое число будет преобразовано в число с плавающей точкой (`float`/`double`), и только потом будет выполнена операция над ними.

Если в операции участвуют `float` и `double`, то `float` будет преобразован к `double`. Что, собственно говоря, ожидаемо.

```Java
Типы `byte`, `short`, `char` всегда преобразовываются в тип `int` при взаимодействии между собой. Не зря же тип `int` считается стандартным целочисленным типом.
```

Если умножить `byte` на `short`, будет `int`. Если умножить `byte` на `byte`, будет `int`. Даже если сложить `byte` и `byte`, будет `int`.

![Pasted image 20230404120801.png](..%2F..%2F..%2F..%2FAppData%2FLocal%2FTemp%2FPasted%20image%2020230404120801.png)

### 5. Важный нюанс 

Операция приведения типа имеет довольно высокий приоритет.

![Pasted image 20230404120830.png](..%2F..%2F..%2F..%2FAppData%2FLocal%2FTemp%2FPasted%20image%2020230404120830.png)